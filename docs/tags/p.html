<!DOCTYPE html><html lang="en"><head>
    <title>P-tags: page-specific outputs | HaXtatic Docs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="../haxtatic.css" rel="stylesheet" />
	<!--	tags\p.html
			generated on 2016-12-17
			from D:\dev\hs\hax2\dox-demo\pages\tags\2016-12-17.p.html	-->
</head><body>
    <h4>HaXtatic Docs</h4>
	<ul class="hd-nav">
		<li class="hd-nav"><a id="__hax_htmlLinks__" href="../index.html">Intro</a></li><li class="hd-nav"><a id="__hax_htmlLinks__basics" href="../basics/index.html">Basics</a></li><li class="hd-nav hd-nav-sel"><a id="__hax_htmlLinks__tags" href="../tags/index.html">haXtags</a></li><li class="hd-nav"><a id="__hax_htmlLinks__xtypes" href="../xtypes/index.html">X-renderers</a></li>
	</ul>
	<div class="hd-toc">
		<input type="checkbox" checked="checked" id="chk_showtoc"/>
		<label for="chk_showtoc">On this page:</label>
		<ul>
			<li><a href="#Built-in">Built-in</a></li><li><a href="#Custom">Custom</a></li><li><a href="#Page-relative URLs">Page-relative URLs</a></li><li><a href="#Delaying X-tags">Delaying X-tags</a></li>
		</ul>
	</div>


<!-- begins content source page -->
<h1>P-tags: page-specific outputs</h1>
<p class="up"><code>{P<!---->| .. |<!---->}</code> tags refer to the <b>current page context</b> during rendering; outputting pre-computed values (page title, page date, etc.), custom per-page variables, or correct relative paths from the current location.</p>
<h2 id="Built-in">Built-in</h2>
<ul>
	<li><code>{P<!---->|title|<!---->}</code> &rarr; current page content source's first <code>&lt;h1&gt;</code>'s entire inner markup (if any)<br/>&mdash; eg. for this page: <span class="hd-note">P-tags: page-specific outputs</span></li>
	<li><code>{P<!---->|1st:<i>htmltagname</i>|<!---->}</code> &rarr; current page content source's first <code>&lt;<i>htmltagname</i>&gt;</code>'s entire inner markup (if any)<br/>&mdash; eg. for this page for <code><i>{P<!---->|1st:</i>b<i>|<!---->}</i></code>: <span class="hd-note">current page context</span></li>
	<li><code>{P<!---->|:content:|<!---->}</code> &rarr; current page's entire content source markup (only works in your <a href="../basics/tmplsnip.html">*.haxtmpl.*</a> files)</li>
	<li><code>{P<!---->|date|<!---->}</code> and <code>{P<!---->|date:<i>mydtformatname</i>|<!---->}</code> &rarr; current <a href="../basics/datetime.html">page date</a> <br/>&mdash; eg. for this page: <span class="hd-note">2016-12-17</span></li>
	<li><code>{P<!---->|fileName|<!---->}</code> &rarr; the current page's output file name<br/>&mdash; eg. for this page: <span class="hd-note">p.html</span></li>
	<li><code>{P<!---->|fileBaseName|<!---->}</code> &rarr; the current page's output file name without file extensions<br/>&mdash; eg. for this page: <span class="hd-note">p</span></li>
	<li><code>{P<!---->|fileUri|<!---->}</code> &rarr; the current page's URI path relative to the site root<br/>&mdash; eg. for this page: <span class="hd-note">/tags/p.html</span></li>
	<li><code>{P<!---->|filePath|<!---->}</code> &rarr; the current page's file path relative to the output directory<br/>&mdash; eg. for this page: <span class="hd-note">tags\p.html</span></li>
	<li><code>{P<!---->|dirName|<!---->}</code> &rarr; name of the current page's directory<br/>&mdash; eg. for this page: <span class="hd-note">tags</span></li>
	<li><code>{P<!---->|dirUri|<!---->}</code> &rarr; URI path (relative to the site root) for the the current page's directory<br/>&mdash; eg. for this page: <span class="hd-note">/tags/</span></li>
	<li><code>{P<!---->|dirPath|<!---->}</code> &rarr; relative path of the current page's directory<br/>&mdash; eg. for this page: <span class="hd-note">tags\</span></li>
	<li><code>{P<!---->|srcPath|<!---->}</code> &rarr; full path to the content source of the current page<br/>&mdash; eg. for this page: <span class="hd-note">D:\dev\hs\hax2\dox-demo\pages\tags\2016-12-17.p.html</span></li>
	<li><code>{P<!---->|srcRelPath|<!---->}</code> &rarr; project-directory-relative path to the content source of the current page<br/>&mdash; eg. for this page: <span class="hd-note">pages\tags\2016-12-17.p.html</span></li>
	<li><code>{P<!---->|outBuild|<!---->}</code> &rarr; full path to the current page's output file<br/>&mdash; eg. for this page: <span class="hd-note">D:\dev\hs\hax2\dox-demo\default-build\tags\p.html</span></li>
	<li><code>{P<!---->|outDeploy|<!---->}</code> &rarr; full path to the current page's output file in the <a href="../basics/haxproj.html#cmisc">secondary</a> output directory, if any</li>
	<li><code>{P<!---->|srcTime|<!---->}</code> and <code>{P<!---->|srcTime:<i>mydtformatname</i>|<!---->}</code> &rarr; the current page source's <i>actual</i> modification date/time (which may differ from the <a href="../basics/datetime.html">page date</a> if that was set explicitly)<br/>&mdash; eg. for this page: <span class="hd-note">2017-01-28</span></li>
</ul>
<h2 id="Custom">Custom</h2>
<p>
	Define those like <code>{%P<!---->|<i>name</i>=<i>value</i>|%<!---->}</code> in a page; then while that page is being processed, this <code><i>value</i></code> will replace all encounters of <code>{P<!---->|<i>name</i>|<!---->}</code> <i>anywhere</i> in the page output (including portions coming from the <a href="../basics/tmplsnip.html">outer template</a>, <a href="../basics/tmplsnip.html#snippets">snippets</a> or <a href="../basics/haxproj.html">*.haxproj</a> definitions).
</p>
<p>
	Any characters are acceptable for the <i>name</i> in between <code>{%P<!---->|</code> and <code>&nbsp;=</code>, as well as the <i>value</i> in between <code>&nbsp;=</code> and <code>&nbsp;|%<!---->}</code>. Name and value will each be stripped of all leading and trailing white-space. Later re-defines of an already defined variable are ignored.
</p>
<p>
	Of note: you <b>can</b> overwrite all the built-ins listed above with this feature! Possibly useful for setting page title / date that way, probably useless otherwise &mdash; but possible.
</p>
<h3>Parameterizing</h3>
<p>Supported for up to 6 (in total) occurrences in <i>value</i> of <code>&nbsp;%s</code> or <code>&nbsp;%v</code> (the former should technically be minimally faster, but both functionally equivalent). For accesses then occurring anywhere not simply via <code>{P<!---->|<i>name</i>|<!---->}</code>, but via <code>{P<!---->|<i>name</i>:<i>my value #1</i>|<!---->}</code>, <code>{P<!---->|<i>name</i>:<i>value1:value2</i>|<!---->}</code>, <code>{P<!---->|<i>name</i>:<i>val1:val2:val3</i>|<!---->}</code>, <code>{P<!---->|<i>name</i>:<i>v1:v2:v3:v4</i>|<!---->}</code>, <code>{P<!---->|<i>name</i>:<i>v1:v2:v3:v4:v5</i>|<!---->}</code>, or <code>{P<!---->|<i>name</i>:<i>v1:v2:v3:v4:v5:v6</i>|<!---->}</code> the appropriate in-place value substitutions will be effected. (For any more expressive substitution requirements, use of a <a href="../basics/tmplsnip.html#snippets">snippet</a> would be called for either instead of or combined with the custom P-tag.)</p>
<p class="hd-note"><b>If</b> any such parameterized accesses are to be employed anywhere, to avoid faulty outputs <b>be sure to self-escape</b> <i>all</i> other occurrences of <code>&nbsp;%</code> in the original <i>value</i> (not in the accessing P-tags) by doubling each to <code>&nbsp;%%</code>.</p>
<span id="relpaths"><h2 id="Page-relative URLs">Page-relative URLs</h2></span>
<p>
	Useful when your machine isn't running a local web server / HTTP daemon: use <code>{P<!---->|/ <i>your/uri/here</i> |<!---->}</code> to rewrite that site-root-relative path such that it will correctly point to the destination from the current page <i>without</i> a leading <code>&nbsp;/</code>.<br/>&mdash; eg. linking to <span class="hd-note">/index.html</span> and <span class="hd-note">/basics/index.html</span> from this page via <code>{P<!---->|/<i>index.html</i>|<!---->}</code> and <code>{P<!---->|/<i>basics/index.html</i>|<!---->}</code> respectively outputs in-place: <span class="hd-note">../index.html</span> and <span class="hd-note">../basics/index.html</span>.
</p>
<p>
	If all pages exist next to each other at the site-root level anyway (micro-sites etc.), this isn't of course even needed.
</p>
<span id="delay"><h2 id="Delaying X-tags">Delaying X-tags</h2></span>
<p class="hd-note">Except for rare intricate edge-cases, this is <b>typically neither necessary nor desirable</b>, but in any
event always worth a try (to be undone later if possible) when investigating unexpected X-tag outputs.</p>
<p>By default, the built-in <a href="../xtypes/index.html">X-renderers</a> readily detect and decide autonomously whether to process an <a href="../tags/x.html">X-tag</a> as <a href="../tags/index.html#stages">early</a> as possible, or only once a page context is current (and each expressly documents this behavior).</p>
<p>However, any X-tag can be forced to delay rendering until <a href="../tags/index.html#stages">page time</a> by wrapping it inside a P-tag, ie. turning <code>{X<!---->|<i> .. tag content .. </i>|<!---->}</code></p>
<ul>
	<li>into <b>this</b>: <code>{P<!---->|X|<i> .. tag content .. </i>|<!---->}</code></li>
	<li><b>not</b> this: <code>{P<!---->|{X<!---->|<i> .. tag content .. </i>|<!---->}|<!---->}</code></li>
</ul>

<!-- end of content source page -->
<a name="down"></a>
</body></html>
